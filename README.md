# README

## Описание проекта

Данный проект представляет собой Discord-бота, который автоматизирует процесс подачи и обработки заявок на сервер Minecraft. Основные функции бота включают:
- Подачу заявок через модальные окна.
- Создание текстовых каналов для заявок с персональными правами доступа.
- Автоматическое добавление игроков в whitelist Minecraft-сервера через RCON.
- Управление заявками с помощью кнопок.

---

## Установка и настройка

### Требования

Для работы проекта вам понадобится:
1. **Python 3.8 или выше.**
2. Предварительно установленные библиотеки `disnake` и `mcrcon`.

### Настройка переменных

Перед запуском проекта отредактируйте файл `bot.py` и укажите следующие параметры:

- **RCON конфигурация**:
  - `RCON_IP` — IP-адрес вашего Minecraft-сервера.
  - `RCON_PORT` — порт RCON (по умолчанию: 25575).
  - `RCON_PASS` — пароль для RCON.
  
- **ID Discord-объектов**:
  - `CATEGORY_ID` — ID категории, где будут создаваться каналы для заявок.
  - `ANKETA_ID` — ID канала, где размещена кнопка подачи заявки.
  - `IGROK_ROLE_ID` — ID роли, которую получит пользователь при принятии заявки.
  - `STAFF_ROLE_ID` — ID роли модератора, который может принимать или отклонять заявки.

- **Токен бота**:
  - `TOKEN` — API TOKEN дискорд бота.


## Функционал

### 1. Подача заявки

1. Пользователь нажимает кнопку `Написать` в канале заявок.
2. Бот открывает модальное окно с формой, где заполняются:
   - Ник.
   - Возраст.
   - Ознакомление с правилами.
   - Описание пользователя.
   - Ник пригласившего игрока.
3. После отправки бот создает персональный канал для заявки с доступом только для заявителя и модераторов.

### 2. Обработка заявки

Модераторы могут:
- **Принять заявку**:
  - Пользователь добавляется в whitelist Minecraft-сервера через RCON.
  - Канал заявки удаляется.
- **Отклонить заявку**:
  - Пользователь получает уведомление об отказе.
  - Канал заявки удаляется через 10 минут.

### 3. Автоматизация

При каждом запуске бот:
- Очищает старые сообщения в канале заявок.
- Отправляет новое сообщение с кнопкой подачи заявки через вебхук.


## Особенности

- **Интерактивная подача заявок**: Пользователь заполняет форму с помощью удобного модального окна.
- **Автоматизация**: Бот самостоятельно создает персональный канал для каждой заявки с уникальными правами доступа.
- **Гибкая модерация**: Модераторы могут принимать или отклонять заявки с помощью кнопок.
- **Интеграция с Minecraft**: Заявки одобренных пользователей автоматически добавляются в whitelist Minecraft-сервера через RCON.
- **Очистка канала заявок**: При каждом запуске бот удаляет старые сообщения и отправляет новое сообщение с кнопкой подачи заявки.

---

## Пример использования

1. Пользователь заходит в канал заявок и нажимает кнопку `Написать`.
2. Открывается модальное окно, где пользователь заполняет:
   - Ник.
   - Возраст.
   - Информацию о том, ознакомился ли он с правилами.
   - Немного информации о себе.
   - Ник игрока, который его пригласил.
3. После отправки формы бот:
   - Создает персональный канал для заявки.
   - Отправляет в канал сообщение с данными заявки.
   - Добавляет кнопки для модерации: **Принять** и **Отказаться**.
4. Модератор нажимает одну из кнопок:
   - Если заявка принята:
     - Пользователь добавляется в whitelist Minecraft-сервера.
     - Канал заявки удаляется.
   - Если заявка отклонена:
     - Пользователю отправляется уведомление.
     - Канал заявки удаляется через 10 минут.
